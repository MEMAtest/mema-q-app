"use strict";(()=>{var e={};e.id=331,e.ids=[331],e.modules={145:e=>{e.exports=require("next/dist/compiled/next-server/pages-api.runtime.prod.js")},6326:e=>{e.exports=import("resend")},6893:(e,t,a)=>{a.a(e,async(e,r)=>{try{a.r(t),a.d(t,{config:()=>u,default:()=>l,routeModule:()=>c});var n=a(1802),s=a(7153),i=a(6249),d=a(1935),o=e([d]);d=(o.then?(await o)():o)[0];let l=(0,i.l)(d,"default"),u=(0,i.l)(d,"config"),c=new n.PagesAPIRouteModule({definition:{kind:s.x.PAGES_API,page:"/api/leads",pathname:"/api/leads",bundlePath:"",filename:""},userland:d});r()}catch(e){r(e)}})},9822:(e,t,a)=>{let r;a.d(t,{Z:()=>s});let n=require("@prisma/client");r=new n.PrismaClient;let s=r},1935:(e,t,a)=>{a.a(e,async(e,r)=>{try{a.r(t),a.d(t,{default:()=>handler});var n=a(9822),s=a(6326),i=e([s]);s=(i.then?(await i)():i)[0];let d=new s.Resend(process.env.RESEND_API_KEY);async function handler(e,t){if("POST"!==e.method)return t.setHeader("Allow",["POST"]),t.status(405).end(`Method ${e.method} Not Allowed`);let{email:a,phone:r}=e.body;if(!a||!r)return t.status(400).json({error:"Email and phone are required."});try{let e=await n.Z.lead.create({data:{email:a,phone:r}});return await d.emails.send({from:"onboarding@resend.dev",to:"contact@memaconsultants.com",subject:"New FinProms Questionnaire Lead",html:`<div><h2>New Lead Submitted</h2><p>Email: ${a}</p><p>Phone: ${r}</p></div>`}),t.status(201).json(e)}catch(e){return console.error("Error creating lead or sending email:",e),t.status(500).json({error:"Failed to process request."})}}r()}catch(e){r(e)}})}};var t=require("../../webpack-api-runtime.js");t.C(e);var __webpack_exec__=e=>t(t.s=e),a=t.X(0,[222],()=>__webpack_exec__(6893));module.exports=a})();